{% extends 'admin/base.html' %}

{% load i18n unfold %}

{% block breadcrumbs %}{% endblock %}

{% block title %}
    {% trans 'Dashboard' %} | {{ site_title|default:_('Django site admin') }}
{% endblock %}

{% block extrahead %}
    {{ block.super }}

    {% if plausible_domain %}
        <script defer data-domain="{{ plausible_domain }}" src="https://plausible.io/js/script.js"></script>
    {% endif %}
{% endblock %}

{% block branding %}
    {% include "unfold/helpers/site_branding.html" %}
{% endblock %}

{% block content %}
    {% include "unfold/helpers/messages.html" %}

    {% component "unfold/components/container.html" %}
        <div class="flex flex-col gap-8 mb-12">
            {% component "unfold/components/card.html" with title=_("Correlation Matrix Heatmap") %}
                {% component "unfold/components/chart/cohort.html" with component_class="CohortDatasetComponent" %}{% endcomponent %}
            {% endcomponent %}

            <div class="flex flex-col gap-8 lg:flex-row">
                {% for stats in model_data %}
                    {% component "unfold/components/card.html" with class="lg:w-1/3" footer=stats.footer %}
                        {% component "unfold/components/text.html" %}
                            {{ stats.title }}
                        {% endcomponent %}

                        {% component "unfold/components/title.html" %}
                            {{ stats.metric }}
                        {% endcomponent %}
                    {% endcomponent %}
                {% endfor %}
            </div>

            {% component "unfold/components/card.html" with title=_("Model parameters weight") %}
                <div class="flex flex-col gap-8 lg:flex-row">
                    {% for model_name, importance_list in model_importance.items %}
                        {% component "unfold/components/card.html" with class="lg:w-1/3" %}
                            {% component "unfold/components/title.html" with class="mb-2" %}
                                {{ model_name }}
                            {% endcomponent %}
                            <div class="flex flex-col gap-5">
                                {% for metric in importance_list %}
                                    {% component "unfold/components/progress.html" with title=metric.title description=metric.description value=metric.value %}{% endcomponent %}
                                {% endfor %}
                            </div>
                        {% endcomponent %}
                    {% endfor %}
                </div>
            {% endcomponent %}

        </div>
    {% endcomponent %}
{% endblock %}
